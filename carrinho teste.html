<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrinho de Compras</title>
    <style>
        /* Estilos para exibir cada item como um card */
        .card {
            border: 1px solid #ddd;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .card h2 {
            margin: 0 0 10px;
            font-size: 1.2em;
        }
        .card p {
            margin: 5px 0;
        }
        .card button {
            margin: 5px 2px;
            padding: 5px 10px;
            font-size: 0.9em;
            cursor: pointer;
        }
    </style>
    <script>
        function exibirCarrinho() {
            const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
            const listaCarrinho = document.getElementById("lista-carrinho");
            listaCarrinho.innerHTML = ''; // Limpa a lista antes de exibir os itens

            carrinho.forEach((item, index) => {
                const card = document.createElement("div");
                card.classList.add("card");

                // Exibe os detalhes do produto
                card.innerHTML = `
                    <h2>${item.nome}</h2>
                    <p>Preço: R$${item.preco.toFixed(2)}</p>
                    <p>Quantidade: ${item.quantidade}</p>
                    <p>Total: R$${(item.preco * item.quantidade).toFixed(2)}</p>
                    <button onclick="atualizarQuantidade(${item.id}, ${item.quantidade + 1})">+</button>
                    <button onclick="atualizarQuantidade(${item.id}, ${item.quantidade - 1})">-</button>
                    <button onclick="removerItemDoCarrinho(${item.id})">Remover</button>
                `;

                listaCarrinho.appendChild(card);
            });

            // Atualiza o valor total de todos os itens no carrinho
            document.getElementById("total").textContent = `Total do Carrinho: R$${calcularTotalCarrinho().toFixed(2)}`;
        }

        function atualizarQuantidade(id, novaQuantidade) {
            let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];

            const produto = carrinho.find(item => item.id === id);
            if (produto) {
                produto.quantidade = novaQuantidade > 0 ? novaQuantidade : 1; // Define quantidade mínima de 1
                localStorage.setItem("carrinho", JSON.stringify(carrinho));
                exibirCarrinho(); // Atualiza a exibição do carrinho
            }
        }

        function removerItemDoCarrinho(id) {
            let carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
            carrinho = carrinho.filter(item => item.id !== id); // Remove o item pelo id
            localStorage.setItem("carrinho", JSON.stringify(carrinho));
            exibirCarrinho(); // Atualiza a exibição do carrinho
        }

        function limparCarrinho() {
            localStorage.removeItem("carrinho"); // Remove todo o carrinho
            exibirCarrinho(); // Atualiza a exibição do carrinho
        }

        function calcularTotalCarrinho() {
            const carrinho = JSON.parse(localStorage.getItem("carrinho")) || [];
            return carrinho.reduce((total, item) => total + item.preco * item.quantidade, 0);
        }

        window.onload = exibirCarrinho; // Exibe o carrinho ao carregar a página
    </script>
</head>
<body>
    <h1>Carrinho de Compras</h1>
    <div id="lista-carrinho"></div>
    <p id="total"></p>
    <button onclick="limparCarrinho()">Limpar Carrinho</button>
</body>
</html>